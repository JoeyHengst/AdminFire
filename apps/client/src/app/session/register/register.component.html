<app-auth-block>
    <h1>Registreren</h1>
    <form (ngSubmit)="register()" [formGroup]="form">
        <div class="input-group">
            <span class="input-group-addon success">@</span>
            <input formControlName="username" [(ngModel)]="usernameText" (keyup)="checkUsername()" id="input-name" class="form-control"
                placeholder="Gebruikersnaam" [formControl]="form.controls['username']" autofocus>
            <small *ngIf="form.controls['username'].hasError('required') && form.controls['username'].touched" class="mat-text-warn">Gebruikersnaam verplicht.</small>
        </div>
        <p class="help is-success" *ngIf="usernameAvailable && usernameText">
            @{{usernameText}} is beschikbaar
        </p>
        <p class="help is-danger" *ngIf="!usernameAvailable && usernameText">
            @{{usernameText}} is al in gebruik
        </p>
        <div class="row full-name-inputs">
            <div class="col-sm-6 input-group">
                <input formControlName="name" id="input-name" class="form-control" placeholder="Voornaam" [formControl]="form.controls['name']"
                    autofocus>
                <small *ngIf="form.controls['name'].hasError('required') && form.controls['name'].touched" class="mat-text-warn">Voornaam verplicht.</small>
            </div>
            <div class="col-sm-6 input-group">
                <input formControlName="lastname" id="input-name" class="form-control" placeholder="Achternaam" [formControl]="form.controls['lastname']"
                    autofocus>
                <small *ngIf="form.controls['lastname'].hasError('required') && form.controls['lastname'].touched" class="mat-text-warn">Achternaam verplicht.</small>
            </div>
        </div>
        <div class="form-group">
            <div class="input-group mail-btn-group">
                <span class="input-group-btn">
                    <button class="btn btn-primary btn-icon">
                        <i class="ion-ios-email-outline"></i>
                    </button>
                </span>
                <input formControlName="email" [(ngModel)]="user.email" id="input-email" class="form-control" placeholder="Email adres" [formControl]="form.controls['email']">
                <small *ngIf="form.controls['email'].hasError('required') && form.controls['email'].touched" class="mat-text-warn">You must include an email address.</small>
                <small *ngIf="form.controls['email'].errors?.email && form.controls['email'].touched" class="mat-text-warn">You must include a valid email address.</small>
            </div>
        </div>
        <div class="form-group">
            <input formControlName="password" type="password" id="input-password" class="form-control" placeholder="Wachtwoord" [formControl]="form.controls['password']">
            <small *ngIf="form.controls['password'].hasError('required') && form.controls['password'].touched" class="mat-text-warn">You must include password.</small>
        </div>
        <div class="form-group">
            <input formControlName="confirmPassword" type="password" id="input-re-password" class="form-control" placeholder="Herhaal wachtwoord"
                [formControl]="form.controls['confirmPassword']">
            <small *ngIf="form.controls['confirmPassword'].hasError('required') && form.controls['confirmPassword'].touched" class="mat-text-warn">You must include confirm password.</small>
            <small *ngIf="form.controls['confirmPassword'].errors?.equalTo" class="mat-text-warn">Passwords do not match.</small>
        </div>
        <div class="form-group accept-group col-sm-12">
            <nb-checkbox formControlName="terms">
                Akkoord met
                <a href="#" target="_blank">
                    <strong>Algemene Voorwaarden</strong>
                </a>
            </nb-checkbox>
        </div>
        <button [disabled]="submitted || !form.valid" class="btn btn-block btn-hero-success" [class.btn-pulse]="submitted">
            Registreren
        </button>
    </form>
    <div class="links">
        <small class="form-text">
            Heb je al een account?
            <a [routerLink]="['/login']">
                <strong>Inloggen</strong>
            </a>
        </small>
    </div>
</app-auth-block>